webpackJsonp([14],{"6n/f":function(e,t){},CxrI:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("woOf"),r=o.n(n),a=o("mvHQ"),s=o.n(a),u=o("Xxa5"),c=o.n(u),i=o("exGp"),p=o.n(i),m=o("sMN7"),l=o("gvSL"),f=o("foCY"),h=o("JzG3"),d=o("gyMJ"),A=o("0Dnf"),b=o("UmZI"),y=o("Hds5"),g={name:"TransferPromptAccount",components:{simpleCashier:l.a,feeConfirm:f.a,moneyInput:h.a},mixins:[b.a],data:function(){return{amount:"",feeConfirmVisible:!1,BUSI_SCENARIOS:A.b,number:"",TRANSFER_CHANNELS:A.h,customerObj:"",remark:"",moneyFlag:!1,fee:"",readonly:!1,disabled:!1,showContractEntry:!0,notRegistered:!1,showInvalidToast:!1,beforeIcontype:"",promptAccountType:"",promptLookupId:"",promptLookupRef:"",receiverName:""}},computed:{btnok:function(){return"scan"===this.$route.query.type?this.moneyFlag:this.moneyFlag&&this.beforeIcontype},busiType:function(){return"scan"===this.$route.query.type?A.b.PROMPTPAY:A.b.TRANSFER},busiScenarios:function(){return"scan"===this.$route.query.type?A.b.PROMPTPAY:A.b.TRANSFER}},watch:{number:function(e){this.$refs.commonInput.currentValue=this.sortNum(e);var t=e.replace(/[^\d]/g,"");9===t.length||10===t.length&&"0"===t.slice(0,1)?(this.beforeIcontype="mobile",this.promptAccountType="MSISDN"):13===t.length?(this.beforeIcontype="id",this.promptAccountType="NATID"):15===t.length?(this.beforeIcontype="ewallet",this.promptAccountType="EWALLETID"):(this.beforeIcontype="",this.promptAccountType="")}},beforeRouteLeave:function(e,t,o){y.v(),o()},created:function(){var e=this;return p()(c.a.mark(function t(){var o,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(y.t(),e.$SDK.onBackPress(function(){e.$router.push({name:"transfer"})}),e.$SDK.setTitle({title:e.$t("ToPromptPayAccount"),mHeaderTitle:{showEnd:0,showBack:1}}),"scan"===e.$route.query.type&&(o=e.$route.query,e.getBeforeIconType(o.promptAccountType),e.disabled=!0,e.number=o.number,e.promptAccountType=o.promptAccountType,o.amount&&parseFloat(o.amount)>0&&(e.amount=o.amount||"",e.readonly=!0)),"history"===e.$route.query.type&&(e.customerObj=JSON.parse(m.a.get("transfer_hisory_account")||""),e.$nextTick().then(function(){e.$refs.commonInput.currentValue=e.sortNum(e.customerObj.promptAccountNo),e.promptAccountType=e.customerObj.PromptAccountType,e.getBeforeIconType(e.customerObj.PromptAccountType)})),!sessionStorage.getItem("promptFee")){t.next=10;break}e.fee=sessionStorage.getItem("promptFee"),console.log(e.fee),t.next=14;break;case 10:return t.next=12,Object(d.B)({busiScenarios:e.busiScenarios,transferChannel:A.h.PROMPTPAY});case 12:1===(n=t.sent).data.resultCode?(sessionStorage.setItem("promptFee",n.data.resultData.fee),e.fee=n.data.resultData.fee):0===n.data.resultCode&&e.hasPayError(n);case 14:case"end":return t.stop()}},t,e)}))()},mounted:function(){console.log(this.$data)},methods:{handleClick:function(){var e=this;return p()(c.a.mark(function t(){var o,n,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return y.w(),o={version:e.$DeviceInfo.appVersion,amount:e.amount,currency:"THB",fee:e.fee,promptAccountNo:e.number.replace(/[^\d]/g,""),promptAccountType:e.promptAccountType,deviceMsg:s()(e.$DeviceInfo),transferChannel:A.h.PROMPTPAY,busiType:e.busiType,remark:e.remark},t.next=4,Object(d.q)(o);case 4:1===(n=t.sent).data.resultCode?(e.promptLookupId=n.data.resultData.promptLookupId,e.promptLookupRef=n.data.resultData.promptLookupRef,e.receiverName=n.data.resultData.receiverName,a=r()(o,{promptLookupId:e.promptLookupId,promptLookupRef:e.promptLookupRef,receiverName:e.receiverName}),m.a.set("promptPayInfo",s()(a)),e.$router.push({name:"transferPromptConfirm"})):0===n.data.resultCode&&e.hasPayError(n);case 6:case"end":return t.stop()}},t,e)}))()},gotoPhoneList:function(){var e=this;return p()(c.a.mark(function t(){var o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("scan"!==e.$route.query.type){t.next=2;break}return t.abrupt("return");case 2:return y.s(),console.log("gotoPhoneList"),t.next=6,e.$SDK.goNativeCustomContact();case 6:if(o=t.sent,console.log(o),0!==o.status){t.next=11;break}return console.log("未选择任何联系人"),t.abrupt("return");case 11:e.customerObj="",String(o.outData.phone).length>10?e.$refs.commonInput.currentValue=String(o.outData.phone).substring(0,10):e.$refs.commonInput.currentValue=o.outData.phone,e.notRegistered=!1,e.phoneblur();case 15:case"end":return t.stop()}},t,e)}))()},showCommonInput:function(){var e=this;this.customerObj="",this.notRegistered=!1,console.log(this.$refs.commonInput.$el.querySelector("input")),this.$nextTick(function(){e.$refs.commonInput.$el.querySelector("input").focus()})},sortNum:function(e){return e.toString().replace(/(\d{4})(?=\d)/g,"$1 ")},moneyLimitOk:function(){this.$refs.moneyInput.amount=this.amount},getBeforeIconType:function(e){this.beforeIcontype="MSISDN"===e?"mobile":"NATID"===e?"id":"ewallet"},phoneblur:function(){var e=this;console.log("blur"),this.$nextTick(function(){e.showContractEntry=!0})},receiveNotes:function(e){this.remark=e},receiveMoneyFlag:function(e){this.moneyFlag=e},inputFocus:function(){this.showContractEntry=!1},querySearch:function(e,t){var o=this;return p()(c.a.mark(function n(){var r;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e.length>2)){n.next=8;break}return n.next=3,o.$SDK.getPhonesByNumber(e);case 3:r=n.sent,console.log("phonelist:",r),t(r),n.next=9;break;case 8:t([]);case 9:case"end":return n.stop()}},n,o)}))()},handlePhoneClear:function(){this.notRegistered=!1}}},I={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"blance-transfer-prompt"},[n("div",{staticClass:"transfer-notice"},[e._v("\n    "+e._s(this.$t("transferNotice"))+"\n  ")]),e._v(" "),n("div",{staticClass:"input-wraper"},[n("common-input",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],ref:"commonInput",attrs:{border:!1,"show-suggest":!0,"fetch-suggestions":e.querySearch,"before-icontype":e.beforeIcontype,disabled:e.disabled,"style-obj":{right:".4rem"},maxlength:18,type:"tel",holder:this.$t("TransferTo")},on:{blur:e.phoneblur,focus:e.inputFocus,handleClear:e.handlePhoneClear},model:{value:e.number,callback:function(t){e.number=t},expression:"number"}}),e._v(" "),n("img",{directives:[{name:"show",rawName:"v-show",value:e.showContractEntry,expression:"showContractEntry"}],staticClass:"custom-ico",attrs:{src:o("QsSU")},on:{click:e.gotoPhoneList}})],1),e._v(" "),n("moneyInput",{ref:"moneyInput",attrs:{"notes-entry":!0,readonly:e.readonly,"transfer-channel":e.TRANSFER_CHANNELS.PROMPTPAY,"busi-scenarios":e.BUSI_SCENARIOS.TRANSFER},on:{addNotes:e.receiveNotes,moneyFlag:e.receiveMoneyFlag,moneyLimitOk:e.moneyLimitOk},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}}),e._v(" "),n("div",{staticClass:"btn-wraper"},[n("common-button",{attrs:{disabled:!e.btnok,type:"danger"},nativeOn:{click:function(t){return e.handleClick(t)}}},[e._v(e._s(this.$t("transfer")))])],1)],1)},staticRenderFns:[]};var v=o("VU/8")(g,I,!1,function(e){o("6n/f")},"data-v-5c1aedd8",null);t.default=v.exports},QsSU:function(e,t){e.exports="data:image/png;base64,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"}});