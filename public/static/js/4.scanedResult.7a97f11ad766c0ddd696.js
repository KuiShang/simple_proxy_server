webpackJsonp([4],{B5Se:function(t,e){},GaJB:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Xxa5"),r=a.n(s),n=a("exGp"),o=a.n(n),i=a("gyMJ"),c=a("FfyX"),u=a("/ZZc"),l=a("020a"),d=a("0Dnf"),m=a("zCTX"),h=a("JabP"),f={name:"ScanedResult",components:{resultFail:l.a,SuccReturnPromo:m.a,guideFingerprintPay:h.a},mixins:[c.a,u.a],data:function(){return{showSuccess:!0,titleRightMsg:{text:"Done",show:1,textSize:18,textColor:"#FF3E5B"}}},created:function(){var t=this;this.initData(),this.$SDK.setTitle({title:this.$t("payment"),mHeaderTitle:{showEnd:0,showBack:0}}),this.$SDK.setTitleRight(this.titleRightMsg,function(){t.$SDK.closeWebViewAndSendResult()})},methods:{initData:function(){var t=this;return o()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("p2pFail"!==t.$route.name){e.next=3;break}return t.showSuccess=!1,e.abrupt("return");case 3:if(t.$route.query.transactionNo){e.next=6;break}return t.showSuccess=!1,e.abrupt("return");case 6:return e.next=8,Object(i.x)({transactionNo:t.$route.query.transactionNo});case 8:a=e.sent,t.handlInitData(a,function(){t.dataObj.orderAmount||(t.showSuccess=!1)});case 10:case"end":return e.stop()}},e,t)}))()},handleClick:function(){console.log("click"),this.$SDK.closeWebViewAndSendResult()},tryAgain:function(){this.$SDK.closeWebView()},getDisplayName:function(t){if(!t.payResultModel)return"";var e=t&&t.payResultModel&&t.payResultModel.payMethodCodeFirst,a=t.payResultModel&&t.payResultModel.displayName;if(e===d.k.ODD){var s=this.dataObj.payResultModel.maskedNo?String(this.dataObj.payResultModel.maskedNo).slice(-4):"";return this.$t(d.d[a])+" ("+s+")"}if(e===d.k.BALA)return d.d[a];if(e===d.k.OFLN)return d.d[a];if(e===d.k.CCP){var r=this.dataObj.payResultModel.maskedNo?String(this.dataObj.payResultModel.maskedNo).slice(-4):"";return this.$t(d.d[a])+" ("+r+")"}return""}}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-result"},[t.showSuccess?s("div",{staticClass:"result"},[s("div",{staticClass:"head"},[s("img",{staticClass:"img",attrs:{src:a("Xus2")}}),t._v(" "),s("p",{staticClass:"txt-title"},[t._v("Payment Success!")]),t._v(" "),s("p",{staticClass:"txt-des"},[s("span",{staticClass:"money"},[t._v("à¸¿ "+t._s(t._f("thousandBitSeparator")(t._f("tofloat")(t.dataObj.orderAmount))))])])]),t._v(" "),t.dataObj.remark?s("p",{staticClass:"notes"},[t._v("Notes: "+t._s(t.dataObj.remark))]):t._e(),t._v(" "),s("ul",{staticClass:"list"},[s("li",{staticClass:"item"},[s("span",{staticClass:"key"},[t._v("Payee Name")]),t._v(" "),s("span",[t._v(t._s(t.dataObj.merchantName))])]),t._v(" "),s("li",{staticClass:"item"},[s("span",{staticClass:"key"},[t._v("Payment Method")]),t._v(" "),s("span",[t._v(t._s(t.getDisplayName(t.dataObj)))])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"btn-wraper"},[s("common-button",{attrs:{type:"danger"},nativeOn:{click:function(e){return t.handleClick(e)}}},[t._v("|0123|DONE\n      ")])],1),t._v(" "),s("SuccReturnPromo"),t._v(" "),"cashier"===t.$route.query.from?s("guideFingerprintPay"):t._e()],1):s("resultFail",{attrs:{"type-str":"Transfer"},on:{click:t.tryAgain}})],1)},staticRenderFns:[]};var v=a("VU/8")(f,p,!1,function(t){a("yiLs")},"data-v-40ce3e18",null);e.default=v.exports},PgUU:function(t,e,a){t.exports=a.p+"static/img/ColouredRibbon.bd94a91.gif"},fh4H:function(t,e,a){t.exports=a.p+"static/img/card@2x.9ebe614.png"},holR:function(t,e,a){t.exports=a.p+"static/img/yellow_card@2x.53f1261.png"},yiLs:function(t,e){},z9OG:function(t,e,a){t.exports=a.p+"static/img/gray_card@2x.cef3576.png"},zCTX:function(t,e,a){"use strict";var s=a("Xxa5"),r=a.n(s),n=a("exGp"),o=a.n(n),i=a("gyMJ"),c={name:"SuccReturnPromo",data:function(){return{hasPromoStatus:0,promotionAmountMax:null,arrPromotion:[1,2,3,4],arrPromotionAmount:[],titleRightMsg:{text:"Done",show:1,textSize:18,textColor:"#FF3E5B"},timeOfTurnOver:800,eleBack:null,eleFront:null,eleList:null,stop:!1,promoInfoServer:null,aTreasureBox:null}},computed:{transactionNo:function(){return this.$utils.getQueryString("transactionNo")},customerId:function(){return this.$utils.getCookie("customerId")},platform:function(){return"Android"===this.$DeviceInfo.os?3:4}},created:function(){var t=this;return o()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.transactionNo&&t.customerId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(i.c)({transactionNo:t.transactionNo,customerId:t.customerId,userIp:t.$DeviceInfo.ip,platform:t.platform,deviceInfo:t.$DeviceInfo});case 4:1===(a=e.sent).data.resultCode?!0===a.data.resultData.status&&(t.hasPromoStatus=1,t.promotionAmountMax=a.data.resultData.maxCashback,t.promoInfoServer=a.data.resultData.promoInfo,t.upAndDown(),t.turnFace()):t.hasPromoStatus=3;case 6:case"end":return e.stop()}},e,t)}))()},methods:{upAndDown:function(){var t=this;this.aTreasureBox=document.querySelectorAll(".treasure-box");var e=this.aTreasureBox.length;if(this.aTreasureBox[0].classList.add("animate-bounce-up"),1!==e)for(var a=0;a<e;a+=1)a===e-1?this.aTreasureBox[a].addEventListener("webkitAnimationIteration",function(){this.classList.remove("animate-bounce-up"),t.aTreasureBox[0].classList.add("animate-bounce-up")},!1):this.aTreasureBox[a].addEventListener("webkitAnimationIteration",function(){this.classList.remove("animate-bounce-up"),this.nextElementSibling.classList.add("animate-bounce-up")},!1)},turnFace:function(){var t,e=(t=o()(r.a.mark(function t(){var n,o,c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.aTreasureBox.forEach(function(t){t.removeEventListener("click",e,!1),t.classList.remove("animate-bounce-up"),t.classList.remove("animation-running"),t.classList.add("animation-paused")}),this.classList.remove("animate-bounce-up"),this.classList.remove("animation-paused"),this.classList.add("animation-running"),this.classList.add("animate-shake-up"),1===a.hasPromoStatus){t.next=7;break}return t.abrupt("return",!1);case 7:return n=document.querySelector("#"+this.id+" span"),t.next=10,Object(i.b)({transactionNo:a.transactionNo,customerId:a.customerId,userIp:a.$DeviceInfo.ip,platform:a.platform,promoInfo:a.promoInfoServer,deviceInfo:this.$DeviceInfo});case 10:return o=t.sent,console.log("resHit",o),(c=o.status)?504===c?(a.hasPromoStatus=2,this.classList.remove("animate-shake-up"),a.aTreasureBox.forEach(function(t){t.addEventListener("click",e,!1)})):c>=200&&c<300||304===c?(1===o.data.resultCode?(n.innerHTML=o.data.resultData.cashback,a.arrPromotionAmount=o.data.resultData.randomCash,this.classList.remove("animate-shake-up")):a.hasPromoStatus=3,s(this.id),a.eleFront.classList.add("out"),a.eleFront.classList.add("hide"),a.eleFront.classList.remove("in"),setTimeout(function(){a.aTreasureBox.forEach(function(t){t.classList.remove("animate-bounce-up")});var t=document.querySelectorAll(".treasure-box:not(.selected)");a.toArray(document.querySelectorAll(".treasure-box:not(.selected) span")).forEach(function(t,e){t.innerHTML=a.arrPromotionAmount[e]}),setTimeout(function(){t.forEach(function(t){a.toArray(t.children).forEach(function(t){t.classList.contains("out")?(t.classList.add("in"),t.classList.remove("out"),t.classList.remove("hide")):(t.classList.add("out"),t.classList.add("hide"),t.classList.remove("in"))})})},a.timeOfTurnOver),a.eleBack.classList.remove("hide"),a.eleBack.classList.add("in"),a.eleBack.classList.remove("out"),s()},225)):a.hasPromoStatus=3:-1!==o.toString().indexOf("timeout")||-1!==o.toString().indexOf("504")?(a.hasPromoStatus=2,this.classList.remove("animate-shake-up"),a.aTreasureBox.forEach(function(t){t.addEventListener("click",e,!1)})):a.hasPromoStatus=3,t.abrupt("return",!1);case 15:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)}),a=this;function s(t){a.eleList=a.toArray(document.querySelectorAll("#"+t+" .list")),t&&document.querySelector("#"+t).classList.add("selected"),a.eleList.forEach(function(t){t.classList.contains("out")?a.eleBack=t:a.eleFront=t})}this.aTreasureBox.forEach(function(t){t.addEventListener("click",e,!1)})},getId:function(t){return"box"+(t+1)},tryPromotion:function(){this.hasPromoStatus=1,this.aTreasureBox.forEach(function(t){t.classList.remove("animation-paused"),t.classList.add("animation-running")})},toArray:function(t){return Array.prototype.slice.call(t)}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.hasPromoStatus,expression:"hasPromoStatus !== 0"}],staticClass:"succ-return-promo"},[a("h6",[t._v("Promotion")]),t._v(" "),a("div",{staticClass:"promo-box"},[a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.hasPromoStatus,expression:"hasPromoStatus === 1"}],staticClass:"promo-hit"},[a("div",{staticClass:"promo-desc"},[a("h6",[t._v("Cash Lucky Draw")]),t._v(" "),a("p",[t._v("Click to get up to "),a("span",[t._v(t._s(t.promotionAmountMax)+" thb")]),t._v(" cashback")])]),t._v(" "),a("div",{staticClass:"treasure"},t._l(t.arrPromotion,function(e,s){return a("div",{key:s,staticClass:"treasure-box viewport-flip",attrs:{id:t.getId(s)}},[t._m(0,!0),t._v(" "),t._m(1,!0)])}))]),t._v(" "),2===t.hasPromoStatus?a("div",{staticClass:"promotion-tryAgain"},[a("h6",[t._v("Sorry, something is wrong")]),t._v(" "),a("p",[a("span",{on:{click:function(e){t.tryPromotion()}}},[t._v("TRY AGAIN")])])]):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3===t.hasPromoStatus,expression:"hasPromoStatus === 3"}],staticClass:"noQualified-promotion"},[a("h6",[t._v("Unfortunately, no award this time. Thank you for participation.")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"list reverse flip out hide",attrs:{href:"javascript:;"}},[e("span"),this._v(" "),e("img",{staticClass:"gray_card",attrs:{src:a("z9OG"),alt:"f"}}),this._v(" "),e("img",{staticClass:"yellow_card",attrs:{src:a("holR"),alt:"f"}}),this._v(" "),e("img",{staticClass:"coloured-ribbon",attrs:{src:a("PgUU"),alt:"f"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"list reverse flip",attrs:{href:"javascript:;"}},[e("img",{attrs:{src:a("fh4H"),alt:"z"}})])}]};var l=a("VU/8")(c,u,!1,function(t){a("B5Se")},null,null);e.a=l.exports}});